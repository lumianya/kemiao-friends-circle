<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
    <title>Du's Garden</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

    <!-- 基础设计系统（含 Memos 卡片样式） -->
    <style>
        :root{
            --bg:#ffffff;
            --bg-soft:#f7f7f7;
            --text:#222;
            --text-soft:#666;
            --border:#e5e5e5;
            --accent:#0066ff;
            --radius:12px;
            --shadow:0 4px 20px rgba(0,0,0,.05);
            --transition:.3s ease;
        }
        [data-theme="dark"]{
            --bg:#1e1e1e;
            --bg-soft:#2a2a2a;
            --text:#e5e5e5;
            --text-soft:#aaa;
            --border:#333;
            --accent:#4f8cff;
            --shadow:0 4px 20px rgba(0,0,0,.25);
        }
        *{margin:0;padding:0;box-sizing:border-box;}
        body{
            font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
            background:var(--bg);color:var(--text);
            transition:background var(--transition),color var(--transition);
            display:flex;flex-direction:column;min-height:100vh;
        }
        header{
            background:var(--bg-soft);border-bottom:1px solid var(--border);
            padding:12px 24px;position:sticky;top:0;z-index:1000;
        }
        nav{display:flex;gap:24px;align-items:center;font-weight:600;}
        nav a{color:var(--text-soft);text-decoration:none;font-size:14px;}
        nav a.active{color:var(--accent);}
        main{flex:1;max-width:800px;width:100%;margin:40px auto;padding:0 20px;}
        section{display:none;}
        section.active{display:block;animation:fadeIn .4s;}
        @keyframes fadeIn{from{opacity:0;transform:translateY(6px);}to{opacity:1;transform:none;}}
        /* Memos 卡片 */
        .memo-card{
            background:var(--bg-soft);
            border:1px solid var(--border);
            border-radius:var(--radius);
            padding:20px;
            margin-bottom:12px;
            box-shadow:var(--shadow);
            white-space:pre-wrap;
            word-break:break-word;
            line-height:1.6;
        }
        .memo-time{
            margin-top:8px;
            font-size:12px;
            color:var(--text-soft);
        }
        .loading,
        .error{
            text-align:center;
            padding:40px;
            color:var(--text-soft);
        }
        .error{color:#e74c3c;}
        /* 友链卡片 */
        .friend-grid{display:grid;gap:20px;}
        @media(min-width:600px){.friend-grid{grid-template-columns:repeat(2,1fr);}}
        @media(min-width:900px){.friend-grid{grid-template-columns:repeat(4,1fr);}}
        .friend-card{
            border:1px solid var(--border);border-radius:var(--radius);
            padding:20px;background:var(--bg-soft);display:flex;gap:12px;align-items:center;
            transition:transform var(--transition),box-shadow var(--transition);
        }
        .friend-card:hover{transform:translateY(-2px);box-shadow:var(--shadow);}
        .friend-card img{width:48px;height:48px;border-radius:50%;object-fit:cover;}
        .friend-info{flex:1;display:flex;flex-direction:column;}
        .friend-name{font-weight:600;color:var(--accent);}
        .friend-desc{font-size:13px;color:var(--text-soft);}
        /* 代码块 */
        pre{background:var(--bg-soft);border:1px solid var(--border);border-radius:var(--radius);
            padding:16px;overflow:auto;font-size:14px;}
        /* 浮动主题按钮 */
        .theme-float{
            position:fixed;bottom:24px;right:24px;
            width:48px;height:48px;border-radius:50%;
            background:var(--accent);color:#fff;border:none;cursor:pointer;
            display:flex;align-items:center;justify-content:center;font-size:20px;
            box-shadow:var(--shadow);transition:transform var(--transition);
        }
        .theme-float:hover{transform:scale(1.1);}
        /* 页脚 */
        footer{
            text-align:center;font-size:13px;color:var(--text-soft);
            padding:40px 20px;border-top:1px solid var(--border);
        }
        footer a{color:var(--accent);margin:0 8px;text-decoration:none;}
    </style>

    <!-- Memos 额外样式 -->
    <link rel="stylesheet" href="https://static.314926.xyz/css/memos/style.css">
    <link rel="stylesheet" href="https://memos.314926.xyz/memos/highlight.github.min.css">
    <link rel="stylesheet" href="https://static.314926.xyz/css/custom/memos-custom.css">
    <link rel="stylesheet" href="https://static.314926.xyz/css/custom/app.css">
</head>

<body>
    <!-- 顶部导航 -->
    <header>
        <nav>
            <a href="#" class="nav-link active" data-page="home">首页</a>
            <a href="#" class="nav-link" data-page="memos">Memos</a>
            <a href="#" class="nav-link" data-page="friends">友链</a>
        </nav>
    </header>

    <main>
        <!-- 首页 / 朋友圈 -->
        <section id="page-home" class="active">
            <div id="friend-circle-lite-root"></div>
            <div class="giscus-container">
                <script src="https://giscus.app/client.js"
                        data-repo="lumianya/kemiao-friends-circle"
                        data-repo-id="R_kgDOPLZljg"
                        data-category="Announcements"
                        data-category-id="DIC_kwDOPLZljs4Cs4xJ"
                        data-mapping="title"
                        data-strict="0"
                        data-reactions-enabled="1"
                        data-emit-metadata="0"
                        data-input-position="top"
                        data-theme="light"
                        data-lang="zh-CN"
                        data-loading="lazy"
                        crossorigin="anonymous"
                        async>
                </script>
            </div>
        </section>

        <!-- Memos（独立页面写法，完全替换） -->
        <section id="page-memos">
            <main id="main" class="container py-10">
                <div id="memos" class="memos"></div>
            </main>

            <!-- 全局配置 -->
            <script>
                window.memos = {
                    host: 'https://memos.050815.xyz',
                    limit: '10',
                    creatorId: '1',
                    domId: '#memos',
                    username: 'kemiao',
                    name: '克喵爱吃卤面',
                };
            </script>

            <!-- 外部脚本（按依赖顺序） -->
            <script src="https://memos.314926.xyz/memos/lazyload.min.js"></script>
            <script src="https://memos.314926.xyz/memos/marked.min.js"></script>
            <script src="https://memos.314926.xyz/memos/view-image.min.js"></script>
            <script src="https://memos.314926.xyz/memos/moment.min.js"></script>
            <script src="https://memos.314926.xyz/memos/moment.twitter.js"></script>
            <script src="https://memos.314926.xyz/memos/highlight.min.js"></script>
            <script src="https://static.314926.xyz/js/memos/main.js"></script>

            <!-- 初始化脚本 -->
            <script>
                document.addEventListener('DOMContentLoaded', () => {
                    setTimeout(() => {
                        if (typeof hljs !== 'undefined') hljs.highlightAll();
                        document.querySelectorAll('.memo').forEach(el => {
                            el.classList.add('bg-white', 'dark:bg-gray-800', 'p-4', 'rounded-lg');
                        });
                    }, 500);
                });
            </script>
        </section>

        <!-- 友链 -->
        <section id="page-friends">
            <h2 style="margin-bottom:20px;">小伙伴们</h2>
            <div class="friend-grid" id="friends-show"></div>

            <h3 style="margin:40px 0 12px;">申请须知</h3>
            <ul style="padding-left:20px;font-size:15px;line-height:1.8;color:var(--text-soft);">
                <li>站点可正常访问，内容健康</li>
                <li>半年内无失联，更新规律</li>
                <li>互换友链后请保持至少半年</li>
            </ul>

            <h3 style="margin:40px 0 12px;">我的信息</h3>
            <pre><code>{
  "name": "喵落阁",
  "desc": "愿你看清一切真相后，依旧热爱你的家人和朋友。",
  "url": "https://myblog.152531.xyz",
  "avatar": "https://cn.cravatar.com/avatar/1F6C8947D35A8186A1647009BA8BC5F2?size=256"
}</code></pre>
        </section>
    </main>

    <!-- 浮动主题按钮 -->
    <button class="theme-float" onclick="toggleTheme()" title="切换主题">🌗</button>

    <!-- 页脚 -->
    <footer>
        <a href="/rss.xml">RSS</a> ·
        <a href="https://github.com/Kemeow815" target="_blank">GitHub</a> ·
        <a href="mailto:me@mail.kemeow.top">Email</a><br/>
        © 2025 克喵爱吃卤面 · <a href="https://icp.gov.moe/?keyword=20250530" target="_blank" rel="noopener noreferrer">萌ICP备20250530号</a>
    </footer>

    <!-- 逻辑脚本 -->
    <script>
        /* ---------- 路由切换 ---------- */
        const links  = document.querySelectorAll('.nav-link');
        const pages  = document.querySelectorAll('section');
        links.forEach(el=>el.addEventListener('click', e=>{
            e.preventDefault();
            const id = el.dataset.page;
            links.forEach(l=>l.classList.toggle('active', l===el));
            pages.forEach(p=>p.classList.toggle('active', p.id==='page-'+id));
        }));

        /* ---------- 主题 ---------- */
        function toggleTheme(){
            const html = document.documentElement;
            const dark = html.getAttribute('data-theme')==='dark';
            const next = dark?'light':'dark';
            html.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
            /* giscus 同步 */
            const g = document.querySelector('iframe.giscus-frame');
            if(g) g.contentWindow.postMessage({giscus:{setConfig:{theme:next}}}, 'https://giscus.app');
        }
        (()=>{
            const t = localStorage.getItem('theme')||'light';
            document.documentElement.setAttribute('data-theme', t);
        })();

        /* ---------- Friend Circle Lite ---------- */
        (()=>{
            if(typeof window==='undefined')return;
            window.UserConfig={
                private_api_url:'https://fc.314926.xyz/',
                page_turning_number:24,
                error_img:'https://pic.imgdb.cn/item/6695daa4d9c307b7e953ee3d.jpg'
            };
            const css=document.createElement('link');
            css.rel='stylesheet';
            css.href='https://fastly.jsdelivr.net/gh/willow-god/Friend-Circle-Lite/main/fclite.min.css';
            document.head.appendChild(css);
            const js=document.createElement('script');
            js.src='https://fastly.jsdelivr.net/gh/willow-god/Friend-Circle-Lite/main/fclite.min.js';
            js.onload=()=>console.warn('Friend Circle Lite loaded');
            document.body.appendChild(js);
            window.fclResources={css,js};
        })();

        /* ---------- 友链数据 ---------- */
        const friendsData=[
            {name:'杜老师说',desc:'杜老师说',url:'https://dusays.com',avatar:'https://cdn.dusays.com/avatar.png'},
            {name:'APP喵',desc:'每日分享有趣App',url:'https://appmiu.com',avatar:'https://appmiu.com/favicon.ico'},
            {name:'张洪Heo',desc:'设计与前端',url:'https://blog.zhheo.com',avatar:'https://blog.zhheo.com/avatar.png'}
        ];
        const friendsHtml=friendsData.map(f=>`
            <a class="friend-card" href="${f.url}" target="_blank">
                <img src="${f.avatar}" alt="${f.name}">
                <div class="friend-info">
                    <div class="friend-name">${f.name}</div>
                    <div class="friend-desc">${f.desc}</div>
                </div>
            </a>
        `).join('');
        document.getElementById('friends-show').innerHTML=friendsHtml;
    </script>
</body>
</html>